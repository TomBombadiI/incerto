"use strict";const navItems=document.querySelectorAll("a.header__link");let currentURL=window.location.hash?window.location.hash:"#main",selectedNavItem=document.querySelector('a[href="'+currentURL+'"]');selectedNavItem.classList.add("_selected"),document.querySelector(currentURL).classList.add("_show");for(let e=0;e<navItems.length;e++){const t=navItems[e];t.addEventListener("click",function(e){const o=t.getAttribute("href");selectedNavItem!=t&&(showContent(o),selectItem(t),changeURL(o),selectedNavItem=t)})}function selectItem(e){e.classList.add("_selected"),selectedNavItem.classList.remove("_selected")}function changeURL(e){currentURL=e}function showContent(e){const t=document.querySelector(e),o=document.querySelector(currentURL);t.classList.add("_show"),o.classList.remove("_show")}const sortBlock=document.querySelector(".sort"),sortBtn=sortBlock.querySelector(".sort__title"),sortMenu=sortBlock.querySelector(".sort__menu");let selectedSortItem=sortMenu.querySelector(".sort__item._selected");function selectSortItem(e){selectedSortItem.classList.remove("_selected"),e.classList.add("_selected"),sortBtn.innerText=e.innerText,selectedSortItem=e}sortBlock.addEventListener("click",function(e){const t=e.target;t.classList.contains("sort__item")?t!=selectedSortItem&&(selectSortItem(t),sortMenu.classList.toggle("_show")):t.classList.contains("sort__title")&&sortMenu.classList.toggle("_show")});let orders=document.querySelectorAll(".order");for(let e=0;e<orders.length;e++){const t=orders[e],o=(t.querySelector(".order__text"),t.querySelector(".order__text-more"));t.addEventListener("click",function(e){e.target.classList.contains("order__text-more")&&toggleFullOrder(t,o)})}function isOverflowed(e){return e.scrollHeight>e.clientHeight}function toggleFullOrder(e,t){e.classList.contains("_full")?(e.classList.remove("_full"),t.innerText="Подробнее"):(e.classList.add("_full"),t.innerText="Свернуть")}const regSubmit=document.querySelector(".popup-reg__submit");function formValidate(e,t="input",o="min"){const s=e.querySelectorAll(t);for(let e=0;e<s.length;e++){const t=s[e];switch(t.getAttribute("name")){case"name":nameValidate(t);break;case"email":emailValidate(t);break;case"password":passwordValidate(t)}}}function nameValidate(e){const t=e.value;t.length>1&&/[A-Za-zА-Яа-яЁё]+(\s+[A-Za-zА-Яа-яЁё]+)?/.test(t)?e.classList.remove("error"):e.classList.add("error")}function emailValidate(e){const t=e.value;/^([a-zA-Z0-9_.-])+@([a-zA-Z0-9_.-])+\.([a-zA-Z])+([a-zA-Z])+/.test(t)?e.classList.remove("error"):e.classList.add("error")}function passwordValidate(e){e.value.length>7?e.classList.remove("error"):e.classList.add("error")}regSubmit.addEventListener("click",async function(e){e.preventDefault();const t=regSubmit.closest("form"),o=new FormData(t);let s,c;formValidate(t,"input","max"),t.querySelector(".error")||((s=await fetch("reg.php",{method:"POST",headers:{"Content-Type":"application/x-www-urldecode"},body:o})).ok?c=await s.text():alert("Неожиданная ошибка, попробуйте позже..."))});const popups=document.querySelectorAll(".popup"),popupLinks=document.querySelectorAll("button[data-popup]"),fixedElements=document.querySelectorAll(".fixed");for(let e=0;e<popupLinks.length;e++){const t=popupLinks[e],o=document.querySelector(t.dataset.popup);t.addEventListener("click",function(){o&&openPopup(o)})}for(let e=0;e<popups.length;e++){const t=popups[e];t.addEventListener("mousedown",function(e){const o=e.target;!o.classList.contains("popup-close")&&o.closest(".popup-content")||closePopup(t)})}function openPopup(e){bodyLock(),e.classList.add("_open")}function closePopup(e){bodyUnlock(),e.classList.remove("_open")}function bodyLock(){document.body.classList.add("_lock")}function bodyUnlock(){document.body.classList.remove("_lock")}